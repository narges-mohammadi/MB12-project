<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <TITLE>Convert JP2 Data to IMG with ESRI ArcGIS Python Scripts</TITLE>
    <LINK REL="stylesheet" HREF="include/common.css" TYPE="text/css" />
    <LINK REL="stylesheet" HREF="include/custom.css" TYPE="text/css" />
  </HEAD>
  <body>
    <!-- BEGIN USGS Header Template -->
    <div id="usgscolorband"><div id="usgsbanner">
		<div id="usgsidentifier"><a href="http://www.usgs.gov/">
			<img src="images/header_graphic_usgsIdentifier_white.jpg" alt="USGS - science for a changing world" title="U.S. Geological Survey Home Page" width="178" height="72" />
		</a></div>
		<div id="usgsccsabox"><div id="usgsccsa">
			<br /><a href="http://www.usgs.gov/">USGS Home</a>
			<br /><a href="http://www.usgs.gov/ask/">Contact USGS</a>
			<br /><a href="http://search.usgs.gov/">Search USGS</a>
			<br />
		</div></div>
    </div></div>
    <!-- END USGS Header Template -->
	
    <div id="usgstitle"><p><i>Convert JP2 Data to IMG with ESRI ArcGIS Python Scripts</i></p></div>
    <div class="MainBody">

		<br />These directions assume that ArcGIS 10 or 10.1 have already been installed with their default install locations.<br />
		<table class="Directions_Table">
			<thead>
				<tr class="Directions_Header">
					<td>Step</td><td>Description</td><td>Screenshot</td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td rowspan=2 class="Directions_Step"><b>1</b></td><td nowrap="nowrap" class="Directions_Step_Title">Obtain JP2 Data</td><td rowspan=2 class="Directions_Screenshot"><img src="images/Small_TNM_Viewer_Download.png" height="200" width="322" /></td>
				</tr>
				<tr>
					<td class="Directions_Text">The primary method for downloading <i>The National Map</i> (TNM) raster JP2 (High Resolution Orthoimagery (HRO) and National Agricultural Imagery Program (NAIP)) type of staged products is by using the TNM Viewer (<a href="http://viewer.nationalmap.gov/viewer/">http://viewer.nationalmap.gov/viewer/</a>).  Zoom to the area of interest and then use the download data link at the top (1). Select the data search extent (2), and one or more of the raster staged products (3).  This will provide a list of all the products available in that extent.  Select the appropriate products and choose next to add them to the shopping cart.  Once you checkout an email will be sent with URL's for downloading the staged products.<br /><br />Use the links provided in the email to download the data, and then unzip (NAIP comes as a JP2 file - no need to unzip) the resulting files on your local computer.  More information on downloading data from <i>The National Map</i> is available at <a href="http://viewer.nationalmap.gov/help/9.0%20TNM%20Cart%20Tab.htm">http://viewer.nationalmap.gov/help/9.0 TNM Cart Tab.htm</a></td>
				</tr>
				<tr>
					<td rowspan=2 class="Directions_Step"><b>2</b></td><td nowrap="nowrap" class="Directions_Step_Title">Obtain USGS Raster Conversion Scripts</td><td rowspan=2 class="Directions_Screenshot"><img src="images/USGS_Raster_Conversion_Scripts.png" height="229" width="322" /></td>
				</tr>
				<tr>
					<td class="Directions_Text">A set of scripts for converting raster staged data is available at <a href="http://gisdata.usgs.gov/website/USGS_Raster_Conversion_Scripts.zip">http://gisdata.usgs.gov/website/USGS_Raster_Conversion_Scripts.zip</a>.  These should be downloaded and unzipped locally.  (These directions are part of the how to documentation in that archive.)</td>
				</tr>
				<tr>
					<td rowspan=2 class="Directions_Step"><b>3a</b></td><td nowrap="nowrap" class="Directions_Step_Title">Option 1: Drag and Drop JP2 Download Folder</td><td rowspan=2 class="Directions_Screenshot"><img src="images/ArcGIS_Convert_All_ADF_2_GeoTIFF.png" height="200" width="370" /></td>
				</tr>
				<tr>
					<td class="Directions_Text">The ArcGIS_Convert_All_JP2_2_IMG.bat script takes a folder name as input and recursively scans that folder for all TIF files and attempts to create a IMG for each.  In windows explorer when you drag and drop a folder onto a batch file, the folder path is passed as the parameter to run that batch file with.  Doing this produces a IMG in that same folder as the JP2 data.  The resulting image(s) will have the name ArcGIS_JP2_2_ANY.img.</td>
				</tr>
				<tr>
					<td rowspan=2 class="Directions_Step"><b>3b</b></td><td nowrap="nowrap" class="Directions_Step_Title">Option 2: Run the ArcGIS_JP2_2_ANY.bat on the command line</td><td rowspan=2 class="Directions_Screenshot"><img src="images/ArcGIS_ADF_2_ANY.png" height="200" width="396" /></td>
				</tr>
				<tr>
					<td class="Directions_Text">
						The ArcGIS_JP2_2_ANY.bat file uses a tif file location for the first parameter which is the source to convert.  This script will not recursively scan the sub-directories to find the data, so the path must point to the actual JP2 file.  A second parameter that is optional allows you to specify the path and name of the output JP2 file.
						<br /><br />
						Since the second parameter is optional, the easiest way to run this is to drag and drop the ArcGrid data folder onto the batch file.  The catch is that the default conversion is to IMG format.  This means to get a JP2 output, we need to specify the second parameter by running this on the command line.  The script uses the file extension of the second parameter to determine the correct output type.  The directions for using this script are presented below: 
						<blockquote><table>
							<tbody>
								<tr><td colspan=2 nowrap="nowrap" class="Code">USAGE:  ArcGIS_JP2_2_ANY.bat &lt;JP2 Input File&gt; [Output File Name]</td></tr>
								<tr><td nowrap="nowrap" class="Code">&lt;JP2 Input File&gt;</td><td class="Code">(REQUIRED) This is the relative or full path to the JP2 file that contains the source data.</td></tr>
								<tr><td nowrap="nowrap" class="Code">[Output File Name]</td><td class="Code">(OPTIONAL) This is the relative or full path to the output file that will be created.  If this is not set, it will attempt to make a sub-folder under the current directory called ANY_Output, and a file in that folder called ArcGIS_JP2_2_ANY.img.  The default format is GeoTIFF, but if a different extension is specified then it will use the format specified by the extension.</td></tr>
							</tbody>
						</table>
						</blockquote>
					</td>
				</tr>
			</tbody>
		</table>
		<br /><br />


    </div>
	
    <!-- BEGIN USGS Footer Template -->
    <div id="usgsfooter">
		<p id="usgsfooterbar">
			<a href="http://www.usgs.gov/laws/accessibility.html" title="Accessibility Policy (Section 508)">Accessibility</a>
			<a href="http://www.usgs.gov/foia/" title="Freedom of Information Act">FOIA</a>
			<a href="http://www.usgs.gov/laws/privacy.html" title="Privacy policies of the U.S. Geological Survey.">Privacy</a>
			<a href="http://www.usgs.gov/laws/policies_notices.html" title="Policies and notices that govern information posted on USGS Web sites.">Policies and Notices</a>
		</p>
		<p id="usgsfootertext">
		<a href="http://www.takepride.gov/"><img src="images/footer_graphic_takePride.jpg" alt="Take Pride in America logo" title="Take Pride in America Home Page" width="60" height="58" /></a>
		<a href="http://usa.gov/"><img src="http://www.usgs.gov/images/footer_graphic_usagov.jpg" alt="USA.gov logo" title="USAGov: Government Made Easy" width="90" height="26" /></a>
		<a href="http://www.doi.gov/">U.S. Department of the Interior</a> |
		<a href="http://www.usgs.gov/">U.S. Geological Survey</a><br />
		Page Contact Information: <a href="mailto:webmapping@usgs.gov">webmapping@usgs.gov</a><br />
		Page Last Modified: September 2015</p>
    </div>
    <!-- END USGS Footer Template -->
  </body>
</html>

